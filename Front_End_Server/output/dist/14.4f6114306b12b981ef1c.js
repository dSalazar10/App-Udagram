(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{L6id:function(n,l,u){"use strict";u.r(l);var t=u("CcnG"),e=function(){return function(){}}(),o=u("gIcY"),i=u("Ip0R"),r=u("oBZk"),a=u("ZZ/e"),s=u("mrSG"),c=u("26FU"),b=u("yZrb"),p=function(){function n(n){this.api=n,this.currentFeed$=new c.a([])}return n.prototype.getFeed=function(){return s.b(this,void 0,void 0,function(){var n;return s.e(this,function(l){switch(l.label){case 0:return[4,this.api.get("/feed")];case 1:return n=l.sent(),this.currentFeed$.next(n.rows),[2,Promise.resolve(this.currentFeed$)]}})})},n.prototype.uploadFeedItem=function(n,l){return s.b(this,void 0,void 0,function(){var u,t;return s.e(this,function(e){switch(e.label){case 0:return[4,this.api.upload("/feed",l,{caption:n,url:l.name})];case 1:return u=e.sent(),t=[u].concat(this.currentFeed$.value),this.currentFeed$.next(t),[2,u]}})})},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(b.a))},token:n,providedIn:"root"}),n}(),d=function(){function n(n,l,u,t){this.feed=n,this.formBuilder=l,this.loadingController=u,this.modalController=t}return n.prototype.ngOnInit=function(){this.uploadForm=this.formBuilder.group({caption:new o.c("",o.n.required)})},n.prototype.setPreviewDataUrl=function(n){var l=this,u=new FileReader;u.onloadend=function(){l.previewDataUrl=u.result},u.readAsDataURL(n)},n.prototype.selectImage=function(n){var l=n.srcElement.files;l&&(this.file=l[0],this.setPreviewDataUrl(this.file))},n.prototype.onSubmit=function(n){var l=this;n.preventDefault(),this.loadingController.create(),this.uploadForm.valid&&this.file&&this.feed.uploadFeedItem(this.uploadForm.controls.caption.value,this.file).then(function(n){l.modalController.dismiss(),l.loadingController.dismiss()})},n.prototype.cancel=function(){this.modalController.dismiss()},n}(),f=t.nb({encapsulation:0,styles:[[""]],data:{}});function h(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,0,"img",[["style","width:50px; height: 50px;"]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.previewDataUrl)})}function g(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,1,"a",[["color","secondary"],["ion-button",""]],null,null,null,null,null)),(n()(),t.Eb(-1,null,[" Select a Photo "]))],null,null)}function m(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,28,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,u){var e=!0,o=n.component;return"submit"===l&&(e=!1!==t.yb(n,2).onSubmit(u)&&e),"reset"===l&&(e=!1!==t.yb(n,2).onReset()&&e),"submit"===l&&(e=!1!==o.onSubmit(u)&&e),e},null,null)),t.ob(1,16384,null,0,o.p,[],null,null),t.ob(2,540672,null,0,o.e,[[8,null],[8,null]],{form:[0,"form"]},null),t.Bb(2048,null,o.a,null,[o.e]),t.ob(4,16384,null,0,o.k,[[4,o.a]],null,null),(n()(),t.Eb(-1,null,["` "])),(n()(),t.pb(6,0,null,null,5,"label",[],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,0,"input",[["accept","image/*"],["style","display:none"],["type","file"]],null,[[null,"change"]],function(n,l,u){var t=!0;return"change"===l&&(t=!1!==n.component.selectImage(u)&&t),t},null,null)),(n()(),t.gb(16777216,null,null,1,null,h)),t.ob(9,16384,null,0,i.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,null,1,null,g)),t.ob(11,16384,null,0,i.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(12,0,null,null,13,"ion-item",[],null,null,null,r.F,r.k)),t.ob(13,49152,null,0,a.E,[t.h,t.k],null,null),(n()(),t.pb(14,0,null,0,2,"ion-label",[["color","primary"],["position","floating"]],null,null,null,r.G,r.m)),t.ob(15,49152,null,0,a.K,[t.h,t.k],{color:[0,"color"],position:[1,"position"]},null),(n()(),t.Eb(-1,0,["Caption"])),(n()(),t.pb(17,0,null,0,8,"ion-input",[["formControlName","caption"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,u){var e=!0;return"ionBlur"===l&&(e=!1!==t.yb(n,20)._handleBlurEvent()&&e),"ionChange"===l&&(e=!1!==t.yb(n,20)._handleInputEvent(u.target.value)&&e),e},r.D,r.j)),t.ob(18,16384,null,0,o.m,[],{required:[0,"required"]},null),t.Bb(1024,null,o.g,function(n){return[n]},[o.m]),t.ob(20,16384,null,0,a.Ib,[t.k],null,null),t.Bb(1024,null,o.h,function(n){return[n]},[a.Ib]),t.ob(22,671744,null,0,o.d,[[3,o.a],[6,o.g],[8,null],[6,o.h],[2,o.r]],{name:[0,"name"]},null),t.Bb(2048,null,o.i,null,[o.d]),t.ob(24,16384,null,0,o.j,[[4,o.i]],null,null),t.ob(25,49152,null,0,a.D,[t.h,t.k],{required:[0,"required"],type:[1,"type"]},null),(n()(),t.pb(26,0,null,null,2,"ion-button",[["color","primary"],["type","submit"]],null,null,null,r.v,r.b)),t.ob(27,49152,null,0,a.h,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"],type:[2,"type"]},null),(n()(),t.Eb(-1,0,[" Post "]))],function(n,l){var u=l.component;n(l,2,0,u.uploadForm),n(l,9,0,u.previewDataUrl),n(l,11,0,!u.previewDataUrl),n(l,15,0,"primary","floating"),n(l,18,0,""),n(l,22,0,"caption"),n(l,25,0,"","text"),n(l,27,0,"primary",!u.uploadForm.valid||!u.file,"submit")},function(n,l){n(l,0,0,t.yb(l,4).ngClassUntouched,t.yb(l,4).ngClassTouched,t.yb(l,4).ngClassPristine,t.yb(l,4).ngClassDirty,t.yb(l,4).ngClassValid,t.yb(l,4).ngClassInvalid,t.yb(l,4).ngClassPending),n(l,17,0,t.yb(l,18).required?"":null,t.yb(l,24).ngClassUntouched,t.yb(l,24).ngClassTouched,t.yb(l,24).ngClassPristine,t.yb(l,24).ngClassDirty,t.yb(l,24).ngClassValid,t.yb(l,24).ngClassInvalid,t.yb(l,24).ngClassPending)})}function y(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,1,"app-feed-upload",[],null,null,null,m,f)),t.ob(1,114688,null,0,d,[p,o.b,a.Cb,a.Db],null,null)],function(n,l){n(l,1,0)},null)}var v=t.lb("app-feed-upload",d,y,{},{},[]),w=u("pMnS"),C=u("N/25"),I=function(){function n(n,l){this.modalController=n,this.auth=l}return n.prototype.ngOnInit=function(){var n=this;this.auth.currentUser$.subscribe(function(l){n.isLoggedIn=null!==l})},n.prototype.ngOnDestroy=function(){this.loginSub&&this.loginSub.unsubscribe()},n.prototype.presentUploadForm=function(n){return s.b(this,void 0,void 0,function(){return s.e(this,function(n){switch(n.label){case 0:return[4,this.modalController.create({component:d})];case 1:return[4,n.sent().present()];case 2:return[2,n.sent()]}})})},n}(),k=t.nb({encapsulation:0,styles:[[""]],data:{}});function F(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,2,"ion-button",[["color","primary"],["type","submit"]],null,[[null,"click"]],function(n,l,u){var t=!0;return"click"===l&&(t=!1!==n.component.presentUploadForm(u)&&t),t},r.v,r.b)),t.ob(1,49152,null,0,a.h,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"],type:[2,"type"]},null),(n()(),t.Eb(-1,0,[" Create a New Post\n"]))],function(n,l){n(l,1,0,"primary",!l.component.isLoggedIn,"submit")},null)}var D=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),x=t.nb({encapsulation:0,styles:[[".photo-card[_ngcontent-%COMP%]{max-width:500px;overflow:hidden;background:var(--ion-color-primary-contrast);margin:30px 0}.photo-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:532px;overflow:hidden;display:flex;justify-content:center;align-items:center}"]],data:{}});function G(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,7,"ion-card",[["class","photo-card"]],null,null,null,r.y,r.d)),t.ob(1,49152,null,0,a.j,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-img",[],null,null,null,r.C,r.i)),t.ob(3,49152,null,0,a.A,[t.h,t.k],{src:[0,"src"]},null),(n()(),t.pb(4,0,null,0,3,"ion-card-content",[],null,null,null,r.x,r.e)),t.ob(5,49152,null,0,a.k,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t.Eb(7,null,["",""]))],function(n,l){n(l,3,0,l.component.feedItem.url)},function(n,l){n(l,7,0,l.component.feedItem.caption)})}function O(n){return t.Gb(2,[(n()(),t.gb(16777216,null,null,1,null,G)),t.ob(1,16384,null,0,i.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.feedItem)},null)}var P=function(){function n(n){this.feed=n,this.subscriptions=[]}return n.prototype.ngOnInit=function(){return s.b(this,void 0,void 0,function(){var n=this;return s.e(this,function(l){switch(l.label){case 0:return this.subscriptions.push(this.feed.currentFeed$.subscribe(function(l){n.feedItems=l})),[4,this.feed.getFeed()];case 1:return l.sent(),[2]}})})},n.prototype.ngOnDestroy=function(){for(var n=0,l=this.subscriptions;n<l.length;n++)l[n].unsubscribe()},n}(),U=t.nb({encapsulation:0,styles:[[".feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:var(--ion-color-light-tint)}"]],data:{}});function j(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,1,"app-feed-item",[],null,null,null,O,x)),t.ob(1,114688,null,0,D,[],{feedItem:[0,"feedItem"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},null)}function q(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,2,"div",[["class","feed"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,null,1,null,j)),t.ob(2,278528,null,0,i.i,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.feedItems)},null)}var B=u("AytR"),E=function(){return function(){this.appName=B.a.appName}}(),S=t.nb({encapsulation:0,styles:[[""]],data:{}});function L(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,5,"ion-content",[],null,null,null,r.z,r.f)),t.ob(1,49152,null,0,a.r,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"app-feed-upload-button",[],null,null,null,F,k)),t.ob(3,245760,null,0,I,[a.Db,C.a],null,null),(n()(),t.pb(4,0,null,0,1,"app-feed-list",[],null,null,null,q,U)),t.ob(5,245760,null,0,P,[p],null,null)],function(n,l){n(l,3,0),n(l,5,0)},null)}function $(n){return t.Gb(0,[(n()(),t.pb(0,0,null,null,1,"app-home",[],null,null,null,L,S)),t.ob(1,49152,null,0,E,[],null,null)],null,null)}var M=t.lb("app-home",E,$,{},{},[]),N=function(){return function(){}}(),_=u("ZYCi");u.d(l,"HomePageModuleNgFactory",function(){return A});var A=t.mb(e,[],function(n){return t.vb([t.wb(512,t.j,t.bb,[[8,[v,w.a,M]],[3,t.j],t.x]),t.wb(4608,i.l,i.k,[t.u,[2,i.r]]),t.wb(4608,o.q,o.q,[]),t.wb(4608,a.a,a.a,[t.z,t.g]),t.wb(4608,a.Db,a.Db,[a.a,t.j,t.q,i.d]),t.wb(4608,a.Gb,a.Gb,[a.a,t.j,t.q,i.d]),t.wb(4608,o.b,o.b,[]),t.wb(4608,p,p,[b.a]),t.wb(1073742336,i.c,i.c,[]),t.wb(1073742336,o.o,o.o,[]),t.wb(1073742336,o.f,o.f,[]),t.wb(1073742336,a.Ab,a.Ab,[]),t.wb(1073742336,o.l,o.l,[]),t.wb(1073742336,N,N,[]),t.wb(1073742336,_.o,_.o,[[2,_.u],[2,_.m]]),t.wb(1073742336,e,e,[]),t.wb(1024,_.k,function(){return[[{path:"",component:E}]]},[])])})}}]);